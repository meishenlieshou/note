{"version":3,"file":"index.js","sources":["../../src/node/utils.ts","../../src/node/prepareClientConfig.ts","../../src/node/docsearchPlugin.ts"],"sourcesContent":["export const PLUGIN_NAME = '@vuepress/plugin-docsearch'\n","import { getModulePath } from '@vuepress/helper'\nimport type { App } from 'vuepress'\nimport { PLUGIN_NAME } from './utils.js'\n\nexport const prepareClientConfig = (\n  app: App,\n  injectStyles: boolean,\n): Promise<string> =>\n  app.writeTemp(\n    'docsearch/config.js',\n    `\nimport { DocSearch, injectDocSearchConfig } from \"${getModulePath(`${PLUGIN_NAME}/client`, import.meta)}\"\n${\n  injectStyles\n    ? `\\\nimport '${getModulePath('@docsearch/css', import.meta)}'\nimport '${getModulePath(`${PLUGIN_NAME}/styles/docsearch.css`, import.meta)}'\nimport '${getModulePath(`${PLUGIN_NAME}/styles/vars.css`, import.meta)}'\n`\n    : ''\n}\\\n\nexport default {\n  enhance({ app }) {\n    injectDocSearchConfig(app)\n    app.component('SearchBox', DocSearch)\n  },\n}\n`,\n  )\n","import type { Plugin } from 'vuepress/core'\nimport type { DocSearchOptions } from '../shared/index.js'\nimport { prepareClientConfig } from './prepareClientConfig.js'\nimport { PLUGIN_NAME } from './utils.js'\n\n/**\n * Options for @vuepress/plugin-docsearch\n */\nexport interface DocSearchPluginOptions extends DocSearchOptions {\n  /**\n   * Base path of the search index\n   */\n  indexBase?: string\n\n  /**\n   * Whether to inject docsearch default styles\n   */\n  injectStyles?: boolean\n}\n\nexport const docsearchPlugin = ({\n  injectStyles = true,\n  indexBase,\n  ...options\n}: DocSearchPluginOptions = {}): Plugin => ({\n  name: PLUGIN_NAME,\n\n  define: (app) => ({\n    __DOCSEARCH_INDEX_BASE__: indexBase || app.siteData.base,\n    __DOCSEARCH_OPTIONS__: options,\n  }),\n\n  clientConfigFile: (app) => prepareClientConfig(app, injectStyles),\n})\n"],"names":["PLUGIN_NAME","prepareClientConfig","app","injectStyles","getModulePath","docsearchPlugin","indexBase","options"],"mappings":"iDAAO,MAAMA,EAAc,6BCIdC,EAAsB,CACjCC,EACAC,IAEAD,EAAI,UACF,sBACA;AAAA,oDACgDE,EAAc,GAAGJ,CAAW,UAAW,WAAW,CAAC;AAAA,EAErGG,EACI,WACIC,EAAc,iBAAkB,WAAW,CAAC;AAAA,UAC5CA,EAAc,GAAGJ,CAAW,wBAAyB,WAAW,CAAC;AAAA,UACjEI,EAAc,GAAGJ,CAAW,mBAAoB,WAAW,CAAC;AAAA,EAEhE,EACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CASE,ECTWK,EAAkB,CAAC,CAC9B,aAAAF,EAAe,GACf,UAAAG,EACA,GAAGC,CACL,EAA4B,CAAA,KAAgB,CAC1C,KAAMP,EAEN,OAASE,IAAS,CAChB,yBAA0BI,GAAaJ,EAAI,SAAS,KACpD,sBAAuBK,CACzB,GAEA,iBAAmBL,GAAQD,EAAoBC,EAAKC,CAAY,CAClE"}