import{_ as i,c as a,a as n,o as e}from"./app-D232rJqM.js";const l={};function t(p,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h2 id="about-monorepo" tabindex="-1"><a class="header-anchor" href="#about-monorepo"><span>About Monorepo</span></a></h2><p>Monorepo (Monolithic Repository) is a code management pattern that stores the code of multiple projects in a single version control repository, instead of using multiple independent repositories (Polyrepo). Monorepo is commonly used for large projects or multiple related sub-projects.</p><p>Typical application scenarios include micro frontend architecture, microservices architecture, etc.</p><h2 id="typical-monorepo-project-structure" tabindex="-1"><a class="header-anchor" href="#typical-monorepo-project-structure"><span>Typical Monorepo Project Structure</span></a></h2><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>my-monorepo/</span></span>
<span class="line"><span>├── package.json  # Top-level dependencies and scripts</span></span>
<span class="line"><span>├── packages/</span></span>
<span class="line"><span>│   ├── package-a/  # Sub-project A</span></span>
<span class="line"><span>│   │   ├── package.json</span></span>
<span class="line"><span>│   │   ├── src/</span></span>
<span class="line"><span>│   │   └── tests/</span></span>
<span class="line"><span>│   ├── package-b/  # Sub-project B</span></span>
<span class="line"><span>│   │   ├── package.json</span></span>
<span class="line"><span>│   │   ├── src/</span></span>
<span class="line"><span>│   │   └── tests/</span></span>
<span class="line"><span>│   └── shared/     # Shared modules</span></span>
<span class="line"><span>│       ├── package.json</span></span>
<span class="line"><span>│       └── src/</span></span>
<span class="line"><span>└── lerna.json      # Lerna configuration (if used)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lerna.json file</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">packages</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">packages/*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ],</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">version</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">independent</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">npmClient</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yarn</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">useWorkspace</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="diagram-of-collaborative-work" tabindex="-1"><a class="header-anchor" href="#diagram-of-collaborative-work"><span>Diagram of Collaborative Work</span></a></h2><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Root (workspace root)</span></span>
<span class="line"><span>├── package.json</span></span>
<span class="line"><span>├── lerna.json</span></span>
<span class="line"><span>├── yarn.lock</span></span>
<span class="line"><span>├── node_modules/       &lt;-- Dependencies in the root directory</span></span>
<span class="line"><span>└── packages/</span></span>
<span class="line"><span>    ├── package-a/</span></span>
<span class="line"><span>    │   ├── package.json</span></span>
<span class="line"><span>    │   └── node_modules/ &lt;-- No local dependencies (linked to root directory)</span></span>
<span class="line"><span>    ├── package-b/</span></span>
<span class="line"><span>    │   ├── package.json</span></span>
<span class="line"><span>    │   └── node_modules/ &lt;-- Linked to root directory</span></span>
<span class="line"><span>    └── shared/</span></span>
<span class="line"><span>        ├── package.json</span></span>
<span class="line"><span>        └── node_modules/ &lt;-- Linked to root directory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="what-are-its-advantages-and-disadvantages" tabindex="-1"><a class="header-anchor" href="#what-are-its-advantages-and-disadvantages"><span>What are its advantages and disadvantages?</span></a></h2><ul><li>Advantages: Unified management, code reuse, simplified collaboration.</li><li>Disadvantages: Increased tool complexity, performance issues with large repositories.</li></ul><h2 id="what-is-the-difference-between-monorepo-and-polyrepo" tabindex="-1"><a class="header-anchor" href="#what-is-the-difference-between-monorepo-and-polyrepo"><span>What is the difference between Monorepo and Polyrepo?</span></a></h2><ul><li>Monorepo: One repository manages multiple projects, unified version control.</li><li>Polyrepo: Each project has an independent repository, looser collaboration between projects.</li></ul><h2 id="combination-of-monorepo-lerna-yarn" tabindex="-1"><a class="header-anchor" href="#combination-of-monorepo-lerna-yarn"><span>Combination of Monorepo + Lerna + Yarn</span></a></h2><ul><li>Lerna provides tools for <strong><code>version management</code></strong>, <strong><code>publishing</code></strong>, and <strong><code>incremental builds</code></strong></li><li>Yarn Workspaces focus on <strong><code>dependency management</code></strong> and <strong><code>workspace linking</code></strong></li></ul><h3 id="configuration-steps" tabindex="-1"><a class="header-anchor" href="#configuration-steps"><span>Configuration Steps</span></a></h3><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#1. Initialize the project</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-monorepo</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-monorepo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yarn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> init</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#2. Enable Yarn Workspaces. Add configuration to the root package.json</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  &quot;private&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  &quot;workspaces&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">packages/*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#3. Install Lerna</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yarn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lerna</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -W</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#4. Initialize Lerna, which will generate lerna.json</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lerna</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> init</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#5. Create sub-projects</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages/package-a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages/package-b</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages/package-a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yarn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> init</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ../package-b</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yarn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> init</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#6. Configure dependencies between sub-packages</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yarn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> workspace</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> package-b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> package-a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="common-commands" tabindex="-1"><a class="header-anchor" href="#common-commands"><span>Common Commands</span></a></h3><ul><li><strong><code>yarn install</code></strong>: Install dependencies</li><li><strong><code>yarn workspace package-a add lodash</code></strong>: Install dependencies for a specified sub-project</li><li><strong><code>npx lerna run build</code></strong>: Lerna provides incremental build capabilities, only rebuilding affected packages</li><li><strong><code>npx lerna publish</code></strong>: Automatically manage version numbers and publish based on changes</li></ul>`,19)]))}const o=i(l,[["render",t],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/learn/front/BMnToay1gGR/","title":"Monorepo","lang":"en-US","frontmatter":{"title":"Monorepo","createTime":"2025/01/18 07:31:53","permalink":"/learn/front/BMnToay1gGR/","author":"Jack","tags":["Monorepo","Micro frontend"],"description":"description","head":[["meta",{"property":"og:url","content":"https://duduainy.top/learn/front/BMnToay1gGR/"}],["meta",{"property":"og:site_name","content":"Seasoned Jack"}],["meta",{"property":"og:title","content":"Monorepo"}],["meta",{"property":"og:description","content":"description"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-02-16T01:18:17.000Z"}],["meta",{"property":"article:author","content":"Jack"}],["meta",{"property":"article:tag","content":"Monorepo"}],["meta",{"property":"article:tag","content":"Micro frontend"}],["meta",{"property":"article:modified_time","content":"2025-02-16T01:18:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Monorepo\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-16T01:18:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jack\\"}]}"]]},"headers":[],"readingTime":{"minutes":1.21,"words":363},"git":{"updatedTime":1739668697000,"contributors":[{"name":"meishenlieshou","username":"meishenlieshou","email":"meishenlieshou@gmail.com","commits":1,"avatar":"https://avatars.githubusercontent.com/meishenlieshou?v=4","url":"https://github.com/meishenlieshou"}],"changelog":[{"hash":"6167b05db8807d0420615f34cb059fcc1b4cf3a8","date":1739668697000,"email":"meishenlieshou@gmail.com","author":"meishenlieshou","message":"Update DSA Microservices Architecture.md","commitUrl":"https://github.com/meishenlieshou/note/commit/6167b05db8807d0420615f34cb059fcc1b4cf3a8"}]},"filePathRelative":"notes/learn/techs/Monorepo.md","bulletin":false}');export{o as comp,d as data};
